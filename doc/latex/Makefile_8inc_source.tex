\hypertarget{Makefile_8inc_source}{\section{Makefile.\+inc}
}

\begin{DoxyCode}
00001 \textcolor{preprocessor}{# Makefile setup file for the MTK.}
00002 
00003 SHELL := /bin/bash
00004 
00005 \textcolor{preprocessor}{#   1. Absolute path to base directory of the MTK.}
00006 \textcolor{preprocessor}{#   \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
00007 
00008 BASE = /home/esanchez/Dropbox/MTK
00009 
00010 \textcolor{preprocessor}{#   2. The machine (platform) identifier and required machine precision.}
00011 \textcolor{preprocessor}{#   \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
00012 
00013 \textcolor{preprocessor}{# Options are:}
00014 \textcolor{preprocessor}{# - LINUX: A LINUX box installation.}
00015 \textcolor{preprocessor}{# - OSX: Uses OS X optimized solvers.}
00016 
00017 PLAT = LINUX
00018 
00019 \textcolor{preprocessor}{# Options are:}
00020 \textcolor{preprocessor}{# - SINGLE: Use 4 B floating point numbers.}
00021 \textcolor{preprocessor}{# - DOUBLE: Use 8 B floating point numbers.}
00022 
00023 PRECISION = DOUBLE
00024 
00025 \textcolor{preprocessor}{#   3. Optimized solvers and operations by means of ATLAS in Linux?}
00026 \textcolor{preprocessor}{#   \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
00027 
00028 \textcolor{preprocessor}{# If you have selected OSX in step 1, then you don't need to worry about this.}
00029 
00030 \textcolor{preprocessor}{# Options are ON xor OFF:}
00031 
00032 ATL\_OPT = OFF
00033 
00034 \textcolor{preprocessor}{#   4. Paths to dependencies (header files for compiling).}
00035 \textcolor{preprocessor}{#   \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
00036 
00037 \textcolor{preprocessor}{# GLPK include path (soon to go):}
00038 
00039 GLPK\_INC = $(HOME)/Libraries/glpk-4.35/include
00040 
00041 # Linux: If ATLAS optimization is ON, users should only provide the path to
00042 # ATLAS:
00043 
00044 ATLAS\_INC = $(HOME)/Libraries/ATLAS\_3.8.4-CORE/include
00045 
00046 \textcolor{preprocessor}{# OS X: Do nothing.}
00047 
00048 \textcolor{preprocessor}{#   5. Paths to dependencies (archive files for (static) linking).}
00049 \textcolor{preprocessor}{#   \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
00050 
00051 \textcolor{preprocessor}{# GLPK linking path (soon to go):}
00052 
00053 GLPK\_LIB = $(HOME)/Libraries/glpk-4.35/lib/lib64/libglpk.a
00054 
00055 # If optimization is OFF, then provide the paths \textcolor{keywordflow}{for}:
00056 
00057 BLAS\_LIB = $(HOME)/Libraries/BLAS-3.5.0/libblas.a
00058 LAPACK\_LIB = $(HOME)/Libraries/lapack-3.5.0/liblapack.a
00059 
00060 # WARNING: Vendor libraries should be used whenever they are available.
00061 
00062 # However, \textcolor{keywordflow}{if} optimization is ON, please provide the path the ATLAS\textcolor{stringliteral}{' archive:}
00063 \textcolor{stringliteral}{}
00064 \textcolor{stringliteral}{ATLAS\_LIB   = $(HOME)/Libraries/ATLAS\_3.8.4-CORE/ATLAS\_3.8.4-BUILD-Citadel/lib}
00065 \textcolor{stringliteral}{}
00066 \textcolor{stringliteral}{#   6. Compiler and its flags.}
00067 \textcolor{stringliteral}{#   \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
00068 \textcolor{stringliteral}{}
00069 \textcolor{stringliteral}{CC = g++}
00070 \textcolor{stringliteral}{}
00071 \textcolor{stringliteral}{# Selective Verbose Execution for Quick Debugging. Options are defined per}
00072 \textcolor{stringliteral}{# concern, and per data hierarchy on each concern.}
00073 \textcolor{stringliteral}{}
00074 \textcolor{stringliteral}{# 0: NO verbose at all.}
00075 \textcolor{stringliteral}{}
00076 \textcolor{stringliteral}{# 1: Enable verbose down to the 7th concern: messages.}
00077 \textcolor{stringliteral}{# 2: Enable verbose down to the 7th concern: messages + scalar results.}
00078 \textcolor{stringliteral}{# 3: Enable verbose down to the 7th concern. 1.1. + array results.}
00079 \textcolor{stringliteral}{# 4: Enable verbose down to the 7th concern. 1.2. + matrix results.}
00080 \textcolor{stringliteral}{}
00081 \textcolor{stringliteral}{# 5: Enable verbose down to the 6th concern: messages.}
00082 \textcolor{stringliteral}{# 6: Enable verbose down to the 6th concern: messages + scalar results.}
00083 \textcolor{stringliteral}{# 7: Enable verbose down to the 6th concern. 2.1. + array results.}
00084 \textcolor{stringliteral}{# 8: Enable verbose down to the 6th concern. 2.2. + matrix results.}
00085 \textcolor{stringliteral}{}
00086 \textcolor{stringliteral}{# 9: Enable verbose down to the 5th concern: messages.}
00087 \textcolor{stringliteral}{# 10: Enable verbose down to the 5th concern: messages + scalar results.}
00088 \textcolor{stringliteral}{# 11: Enable verbose down to the 5th concern. 3.1. + array results.}
00089 \textcolor{stringliteral}{# 12: Enable verbose down to the 5th concern. 3.2. + matrix results.}
00090 \textcolor{stringliteral}{}
00091 \textcolor{stringliteral}{# 13: Enable verbose down to the 4th concern: messages.}
00092 \textcolor{stringliteral}{# 14: Enable verbose down to the 4th concern: messages + scalar results.}
00093 \textcolor{stringliteral}{# 15: Enable verbose down to the 4th concern. 4.1. + array results.}
00094 \textcolor{stringliteral}{# 16: Enable verbose down to the 4th concern. 4.2. + matrix results.}
00095 \textcolor{stringliteral}{}
00096 \textcolor{stringliteral}{VERBOSE\_LEVEL = 16}
00097 \textcolor{stringliteral}{}
00098 \textcolor{stringliteral}{# Enable preventions. In the MTK, methods first validate their required}
00099 \textcolor{stringliteral}{# pre-conditions in run-time. Similarly, in many points throughout the MTK}
00100 \textcolor{stringliteral}{# codebase, different sanity checks are performed, as well. If this symbol is}
00101 \textcolor{stringliteral}{# defined to be 0, the MTK will # perform no validations to enhance execution}
00102 \textcolor{stringliteral}{# performance. Options are:}
00103 \textcolor{stringliteral}{# - YES.}
00104 \textcolor{stringliteral}{# - NO.}
00105 \textcolor{stringliteral}{}
00106 \textcolor{stringliteral}{PERFORM\_PREVENTIONS = YES}
00107 \textcolor{stringliteral}{}
00108 \textcolor{stringliteral}{# Enables creation of LaTeX tables verbosing the computation of mimetic weights.}
00109 \textcolor{stringliteral}{}
00110 \textcolor{stringliteral}{VERBOSE\_WEIGHTS = YES}
00111 \textcolor{stringliteral}{}
00112 \textcolor{stringliteral}{# Flags recommended for release code:}
00113 \textcolor{stringliteral}{}
00114 \textcolor{stringliteral}{CCFLAGS = -Wall -Werror -O2}
00115 \textcolor{stringliteral}{}
00116 \textcolor{stringliteral}{# Flags recommended for debugging code:}
00117 \textcolor{stringliteral}{}
00118 \textcolor{stringliteral}{CCFLAGS = -Wall -Werror -g}
00119 \textcolor{stringliteral}{}
00120 \textcolor{stringliteral}{#   7. Archiver, its flags, and ranlib:}
00121 \textcolor{stringliteral}{#   \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
00122 \textcolor{stringliteral}{}
00123 \textcolor{stringliteral}{ARCH      = ar}
00124 \textcolor{stringliteral}{ARCHFLAGS = cr}
00125 \textcolor{stringliteral}{}
00126 \textcolor{stringliteral}{# If your system does not have "ranlib" then set: "RANLIB = echo":}
00127 \textcolor{stringliteral}{}
00128 \textcolor{stringliteral}{RANLIB = echo}
00129 \textcolor{stringliteral}{}
00130 \textcolor{stringliteral}{# But, if possible:}
00131 \textcolor{stringliteral}{}
00132 \textcolor{stringliteral}{RANLIB = ranlib}
00133 \textcolor{stringliteral}{}
00134 \textcolor{stringliteral}{#   8. Valgrind'}s memcheck options (optional):
00135 \textcolor{preprocessor}{#   \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
00136 
00137 MEMCHECK\_OPTS = -v --tool=memcheck --leak-check=full --show-leak-kinds=all \(\backslash\)
00138   --track-origins=yes --freelist-vol=20000000
00139 
00140 \textcolor{preprocessor}{# Done! User, please, do not mess with the definitions from this point on.}
00141 
00142 \textcolor{preprocessor}{#   \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
00143 \textcolor{preprocessor}{#   \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
00144 \textcolor{preprocessor}{#   \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
00145 
00146 \textcolor{preprocessor}{#   MTK-related.}
00147 \textcolor{preprocessor}{#   \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
00148 
00149 SRC       = $(BASE)/src
00150 INCLUDE   = $(BASE)/include
00151 LIB       = $(BASE)/lib
00152 MTK\_LIB   = $(LIB)/libmtk.a
00153 TESTS     = $(BASE)/tests
00154 EXAMPLES  = $(BASE)/examples
00155 
00156 \textcolor{preprocessor}{#   Compiling-related.}
00157 \textcolor{preprocessor}{#   \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
00158 
00159 CCFLAGS += -\hyperlink{namespacestd}{std}=c++11 -fPIC \(\backslash\)
00160   -DMTK\_VERBOSE\_LEVEL=$(VERBOSE\_LEVEL) -I$(INCLUDE) -c
00161 
00162 ifeq ($(PRECISION),DOUBLE)
00163   CCFLAGS += -DMTK\_PRECISION\_DOUBLE
00164 else
00165   CCFLAGS += -DMTK\_PRECISION\_SINGLE
00166 endif
00167 
00168 ifeq ($(PERFORM\_PREVENTIONS),YES)
00169   CCFLAGS += -DMTK\_PERFORM\_PREVENTIONS
00170 endif
00171 
00172 ifeq ($(VERBOSE\_WEIGHTS),YES)
00173   CCFLAGS += -DMTK\_VERBOSE\_WEIGHTS
00174 endif
00175 
00176 \textcolor{preprocessor}{# Only the GLPK is included because the other dependencies are coded in Fortran.}
00177 
00178 ifeq ($(ATL\_OPT),ON)
00179   CCFLAGS  += -I$(GLPK\_INC) $(ATLAS\_INC)
00180 else
00181   CCFLAGS  += -I$(GLPK\_INC)
00182 endif
00183 
00184 \textcolor{preprocessor}{#   Linking-related.}
00185 \textcolor{preprocessor}{#   \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
00186 
00187 NOOPT\_LIBS  = $(LAPACK\_LIB) $(BLAS\_LIB) -lm $(GLPK\_LIB) -lstdc++
00188 
00189 OPT\_LIBS    = -L$(ATLAS\_LIB) -latlas -llapack -lblas -lm -latlas -lstdc++
00190 
00191 ifeq ($(PLAT),OSX)
00192   LINKER  = g++
00193   LINKER  += -framework Accelerate $(GLPK\_LIB) $(MTK\_LIB)
00194 else
00195   ifeq ($(ATL\_OPT),ON)
00196     LINKER  = g++
00197     LIBS = $(MTK\_LIB)
00198     LIBS += $(OPT\_LIBS)
00199   else
00200     LINKER  = gfortran
00201     LIBS = $(MTK\_LIB)
00202     LIBS += $(NOOPT\_LIBS)
00203   endif
00204 endif
00205 
00206 \textcolor{preprocessor}{#   Documentation-related.}
00207 \textcolor{preprocessor}{#   \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
00208 
00209 DOCGEN      = doxygen
00210 DOCFILENAME = doc\_config.dxcf
00211 DOC         = $(BASE)/doc
00212 DOCFILE     = $(BASE)/$(DOCFILENAME)
\end{DoxyCode}
