\hypertarget{Makefile_8inc_source}{\section{Makefile.\+inc}
}

\begin{DoxyCode}
00001 \textcolor{preprocessor}{# Makefile setup file for the MTK.}
00002 
00003 SHELL := /bin/bash
00004 
00005 \textcolor{preprocessor}{# Please set the following variables up:}
00006 
00007 \textcolor{preprocessor}{#   1. Absolute path to base directory of the MTK.}
00008 \textcolor{preprocessor}{#   \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
00009 
00010 BASE = /home/esanchez/Dropbox/MTK
00011 
00012 \textcolor{preprocessor}{#   2. The machine (platform) identifier and required machine precision.}
00013 \textcolor{preprocessor}{#   \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
00014 
00015 \textcolor{preprocessor}{# Options are:}
00016 \textcolor{preprocessor}{# - LINUX: A LINUX box installation.}
00017 \textcolor{preprocessor}{# - OSX: Uses OS X optimized solvers.}
00018 
00019 PLAT = LINUX
00020 
00021 \textcolor{preprocessor}{# Options are:}
00022 \textcolor{preprocessor}{# - SINGLE: Use 4 B floating point numbers.}
00023 \textcolor{preprocessor}{# - DOUBLE: Use 8 B floating point numbers.}
00024 
00025 PRECISION = DOUBLE
00026 
00027 \textcolor{preprocessor}{#   3. Optimized solvers and operations by means of ATLAS in Linux?}
00028 \textcolor{preprocessor}{#   \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
00029 
00030 \textcolor{preprocessor}{# If you have selected OSX in step 1, then you don't need to worry about this.}
00031 
00032 \textcolor{preprocessor}{# Options are ON xor OFF:}
00033 
00034 ATL\_OPT = OFF
00035 
00036 \textcolor{preprocessor}{#   4. Paths to dependencies (header files for compiling).}
00037 \textcolor{preprocessor}{#   \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
00038 
00039 \textcolor{preprocessor}{# GLPK include path (soon to go):}
00040 
00041 GLPK\_INC = $(HOME)/Libraries/glpk-4.35/include
00042 
00043 # Linux: If ATLAS optimization is ON, users should only provide the path to
00044 # ATLAS:
00045 
00046 ATLAS\_INC = $(HOME)/Libraries/ATLAS\_3.8.4-CORE/include
00047 
00048 \textcolor{preprocessor}{# OS X: Do nothing.}
00049 
00050 \textcolor{preprocessor}{#   5. Paths to dependencies (archive files for (static) linking).}
00051 \textcolor{preprocessor}{#   \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
00052 
00053 \textcolor{preprocessor}{# GLPK linking path (soon to go):}
00054 
00055 GLPK\_LIB = $(HOME)/Libraries/glpk-4.35/lib/lib64/libglpk.a
00056 
00057 # If optimization is OFF, then provide the paths \textcolor{keywordflow}{for}:
00058 
00059 BLAS\_LIB = $(HOME)/Libraries/BLAS-3.5.0/libblas.a
00060 LAPACK\_LIB = $(HOME)/Libraries/lapack-3.5.0/liblapack.a
00061 
00062 # WARNING: Vendor libraries should be used whenever they are available.
00063 
00064 # However, \textcolor{keywordflow}{if} optimization is ON, please provide the path the ATLAS\textcolor{stringliteral}{' archive:}
00065 \textcolor{stringliteral}{}
00066 \textcolor{stringliteral}{ATLAS\_LIB   = $(HOME)/Libraries/ATLAS\_3.8.4-CORE/ATLAS\_3.8.4-BUILD-Citadel/lib}
00067 \textcolor{stringliteral}{}
00068 \textcolor{stringliteral}{#   6. Compiler and its flags.}
00069 \textcolor{stringliteral}{#   \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
00070 \textcolor{stringliteral}{}
00071 \textcolor{stringliteral}{CC = g++}
00072 \textcolor{stringliteral}{}
00073 \textcolor{stringliteral}{# Selective Verbose Execution for Quick Debugging. Options are defined per}
00074 \textcolor{stringliteral}{# concern, and per data hierarchy on each concern.}
00075 \textcolor{stringliteral}{}
00076 \textcolor{stringliteral}{# 0: NO verbose at all.}
00077 \textcolor{stringliteral}{}
00078 \textcolor{stringliteral}{# 1: Enable verbose down to the 7th concern: messages.}
00079 \textcolor{stringliteral}{# 2: Enable verbose down to the 7th concern: messages + scalar results.}
00080 \textcolor{stringliteral}{# 3: Enable verbose down to the 7th concern. 1.1. + array results.}
00081 \textcolor{stringliteral}{# 4: Enable verbose down to the 7th concern. 1.2. + matrix results.}
00082 \textcolor{stringliteral}{}
00083 \textcolor{stringliteral}{# 5: Enable verbose down to the 6th concern: messages.}
00084 \textcolor{stringliteral}{# 6: Enable verbose down to the 6th concern: messages + scalar results.}
00085 \textcolor{stringliteral}{# 7: Enable verbose down to the 6th concern. 2.1. + array results.}
00086 \textcolor{stringliteral}{# 8: Enable verbose down to the 6th concern. 2.2. + matrix results.}
00087 \textcolor{stringliteral}{}
00088 \textcolor{stringliteral}{# 9: Enable verbose down to the 5th concern: messages.}
00089 \textcolor{stringliteral}{# 10: Enable verbose down to the 5th concern: messages + scalar results.}
00090 \textcolor{stringliteral}{# 11: Enable verbose down to the 5th concern. 3.1. + array results.}
00091 \textcolor{stringliteral}{# 12: Enable verbose down to the 5th concern. 3.2. + matrix results.}
00092 \textcolor{stringliteral}{}
00093 \textcolor{stringliteral}{# 13: Enable verbose down to the 4th concern: messages.}
00094 \textcolor{stringliteral}{# 14: Enable verbose down to the 4th concern: messages + scalar results.}
00095 \textcolor{stringliteral}{# 15: Enable verbose down to the 4th concern. 4.1. + array results.}
00096 \textcolor{stringliteral}{# 16: Enable verbose down to the 4th concern. 4.2. + matrix results.}
00097 \textcolor{stringliteral}{}
00098 \textcolor{stringliteral}{VERBOSE\_LEVEL = 16}
00099 \textcolor{stringliteral}{}
00100 \textcolor{stringliteral}{# Enable preventions. In the MTK, methods first validate their required}
00101 \textcolor{stringliteral}{# pre-conditions in run-time. Similarly, in many points throughout the MTK}
00102 \textcolor{stringliteral}{# codebase, different sanity checks are performed, as well. If this symbol is}
00103 \textcolor{stringliteral}{# defined to be 0, the MTK will # perform no validations to enhance execution}
00104 \textcolor{stringliteral}{# performance. Options are:}
00105 \textcolor{stringliteral}{# - YES.}
00106 \textcolor{stringliteral}{# - NO.}
00107 \textcolor{stringliteral}{}
00108 \textcolor{stringliteral}{PERFORM\_PREVENTIONS = YES}
00109 \textcolor{stringliteral}{}
00110 \textcolor{stringliteral}{# Flags recommended for release code:}
00111 \textcolor{stringliteral}{}
00112 \textcolor{stringliteral}{CCFLAGS = -Wall -Werror -O3}
00113 \textcolor{stringliteral}{}
00114 \textcolor{stringliteral}{# Flags recommended for debugging code:}
00115 \textcolor{stringliteral}{}
00116 \textcolor{stringliteral}{CCFLAGS = -Wall -Werror -g}
00117 \textcolor{stringliteral}{}
00118 \textcolor{stringliteral}{#   7. Archiver, its flags, and ranlib:}
00119 \textcolor{stringliteral}{#   \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
00120 \textcolor{stringliteral}{}
00121 \textcolor{stringliteral}{ARCH      = ar}
00122 \textcolor{stringliteral}{ARCHFLAGS = cr}
00123 \textcolor{stringliteral}{}
00124 \textcolor{stringliteral}{# If your system does not have "ranlib" then set: "RANLIB = echo":}
00125 \textcolor{stringliteral}{}
00126 \textcolor{stringliteral}{RANLIB = echo}
00127 \textcolor{stringliteral}{}
00128 \textcolor{stringliteral}{# But, if possible:}
00129 \textcolor{stringliteral}{}
00130 \textcolor{stringliteral}{RANLIB = ranlib}
00131 \textcolor{stringliteral}{}
00132 \textcolor{stringliteral}{#   8. Valgrind'}s memcheck options (optional):
00133 \textcolor{preprocessor}{#   \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
00134 
00135 MEMCHECK\_OPTS = -v --tool=memcheck --leak-check=full --show-leak-kinds=all \(\backslash\)
00136   --track-origins=yes --freelist-vol=20000000
00137 
00138 \textcolor{preprocessor}{# Done! User, please, do not mess with the definitions from this point on.}
00139 
00140 \textcolor{preprocessor}{#   \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
00141 \textcolor{preprocessor}{#   \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
00142 \textcolor{preprocessor}{#   \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
00143 
00144 \textcolor{preprocessor}{#   MTK-related.}
00145 \textcolor{preprocessor}{#   \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
00146 
00147 SRC       = $(BASE)/src
00148 INCLUDE   = $(BASE)/include
00149 LIB       = $(BASE)/lib
00150 MTK\_LIB   = $(LIB)/libmtk.a
00151 TESTS     = $(BASE)/tests
00152 EXAMPLES  = $(BASE)/examples
00153 
00154 \textcolor{preprocessor}{#   Compiling-related.}
00155 \textcolor{preprocessor}{#   \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
00156 
00157 CCFLAGS += -\hyperlink{namespacestd}{std}=c++11 -fPIC \(\backslash\)
00158   -DMTK\_VERBOSE\_LEVEL=$(VERBOSE\_LEVEL) -I$(INCLUDE) -c
00159 
00160 ifeq ($(PRECISION),DOUBLE)
00161   CCFLAGS += -DMTK\_PRECISION\_DOUBLE
00162 else
00163   CCFLAGS += -DMTK\_PRECISION\_SINGLE
00164 endif
00165 
00166 ifeq ($(PERFORM\_PREVENTIONS),YES)
00167   CCFLAGS += -DMTK\_PERFORM\_PREVENTIONS
00168 endif
00169 
00170 \textcolor{preprocessor}{# Only the GLPK is included because the other dependencies are coded in Fortran.}
00171 
00172 ifeq ($(ATL\_OPT),ON)
00173   CCFLAGS  += -I$(GLPK\_INC) $(ATLAS\_INC)
00174 else
00175   CCFLAGS  += -I$(GLPK\_INC)
00176 endif
00177 
00178 \textcolor{preprocessor}{#   Linking-related.}
00179 \textcolor{preprocessor}{#   \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
00180 
00181 NOOPT\_LIBS  = $(LAPACK\_LIB) $(BLAS\_LIB) -lm $(GLPK\_LIB) -lstdc++
00182 
00183 OPT\_LIBS    = -L$(ATLAS\_LIB) -latlas -llapack -lblas -lm -latlas -lstdc++
00184 
00185 ifeq ($(PLAT),OSX)
00186   LINKER  = g++
00187   LINKER  += -framework Accelerate $(GLPK\_LIB) $(MTK\_LIB)
00188 else
00189   ifeq ($(ATL\_OPT),ON)
00190     LINKER  = g++
00191     LIBS = $(MTK\_LIB)
00192     LIBS += $(OPT\_LIBS)
00193   else
00194     LINKER  = gfortran
00195     LIBS = $(MTK\_LIB)
00196     LIBS += $(NOOPT\_LIBS)
00197   endif
00198 endif
00199 
00200 \textcolor{preprocessor}{#   Documentation-related.}
00201 \textcolor{preprocessor}{#   \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
00202 
00203 DOCGEN      = doxygen
00204 DOCFILENAME = doc\_config.dxcf
00205 DOC         = $(BASE)/doc
00206 DOCFILE     = $(BASE)/$(DOCFILENAME)
\end{DoxyCode}
